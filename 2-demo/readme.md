# demo 02

## 善其器

之前的那个测试脚本太丑陋了，我永远不想再见到他。

社区已经为我们提供了很多测试的工具，他们可以组合使用，让我们写测试脚本更像是在说话，距离我们最开始的想法——先有需求，再有实现——更加接近了。我们甚至可以意淫用小皮鞭让产品用写好的测试脚本来给我们提需求，是不是很精彩？

### 测试框架

测试框架有很多，大致提供的都是一个接近于自然语言的测试环境。他们大同小异，我们就采取最流行的**Mocha**吧。

用Mocha的规范来写测试脚本，一般要求脚本包括至少一个`describe`模块，这个模块叫做*测试套件*。每个`describe`里，至少有一个`it`模块，这个模块叫*测试用例*。

大致如下：
``` js
describe('这里是测试套件描述', () => {
	it('这里是测试用例描述', () => {
		// 这里是具体的测试代码
	})
})
```

### 断言库

测试框架让我们写起测试脚本来更像个人，但是我们还需要断言库来让我们做出判断。

社区里断言库也是有很多轮子了，由于我们目前在Node.js环境里跑测试脚本，我们就直接采用Node.js的**assert**模块来做断言。放心，没有使用流行的断言库不丢人，杀鸡用不着上Chai这样的大杀器。

**assert**的[文档在这里](http://nodejs.cn/api/assert.html)。断言一般有三种形式，assert/should/expect，喜欢哪种就哪种。**assert**给我们提供的是第一种。用人话描述就是`断言实际的结果跟预期的结果满足某种关系`。

借助**Mocha**跟**assert**我们来重新写一下之前`add`函数的测试脚本。
``` js
describe('add', () => {
  it('should add', () => {
    assert.equal(add(1, 2), 3)
  })
})
```

我相信大家应该都看得懂这是啥意思，因为有了测试框架跟断言库，写起测试脚本来就是这么自然。